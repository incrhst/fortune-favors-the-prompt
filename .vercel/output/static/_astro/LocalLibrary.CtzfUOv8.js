import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as m,R as T}from"./index.DYrVU9rO.js";import{c as S}from"./createLucideIcon.DYItjaKc.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],A=S("folder-plus",M);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],$=S("pen",D);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],U=S("plus",O);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],B=S("search",z);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],H=S("share-2",F);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],N=S("trash-2",q),J="modulepreload",V=function(n){return"/"+n},G={},W=function(g,f,a){let b=Promise.resolve();if(f&&f.length>0){let u=function(p){return Promise.all(p.map(h=>Promise.resolve(h).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),v=d?.nonce||d?.getAttribute("nonce");b=u(f.map(p=>{if(p=V(p),p in G)return;G[p]=!0;const h=p.endsWith(".css"),k=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${k}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":J,h||(y.as="script"),y.crossOrigin="",y.href=p,v&&y.setAttribute("nonce",v),document.head.appendChild(y),h)return new Promise((o,s)=>{y.addEventListener("load",o),y.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${p}`)))})}))}function j(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return b.then(u=>{for(const d of u||[])d.status==="rejected"&&j(d.reason);return g().catch(j)})},R="anon-prompts-v1";function Y(){const[n,g]=m.useState([]),[f,a]=m.useState([]),[b,j]=m.useState(!1);m.useEffect(()=>{try{const o=localStorage.getItem(R);if(o){const s=JSON.parse(o);g(s.prompts||[]),a(s.groups||[])}}catch(o){console.error("Failed to load local prompts",o)}finally{j(!0)}},[]),m.useEffect(()=>{if(b)try{localStorage.setItem(R,JSON.stringify({prompts:n,groups:f}))}catch(o){console.error("Failed to save local prompts",o)}},[n,f,b]);const u=(o,s="General",r=[])=>{const i={id:crypto.randomUUID(),text:o,category:s,tags:r,createdAt:Date.now(),updatedAt:Date.now()};return g(l=>[i,...l]),i},d=(o,s)=>{g(r=>r.map(i=>i.id===o?{...i,...s,updatedAt:Date.now()}:i))};return{prompts:n,groups:f,isLoaded:b,addPrompt:u,updatePrompt:d,deletePrompt:o=>{g(s=>s.filter(r=>r.id!==o))},createGroup:(o,s,r)=>{const i={id:crypto.randomUUID(),name:o,description:s,color:r,createdAt:Date.now()};return a(l=>[...l,i]),i},deleteGroup:o=>{a(s=>s.filter(r=>r.id!==o)),g(s=>s.map(r=>r.groupId===o?{...r,groupId:void 0}:r))},addToGroup:(o,s)=>{d(o,{groupId:s})},importData:o=>{g(s=>{const r=new Set(s.map(l=>l.id));return[...o.prompts.filter(l=>!r.has(l.id)),...s]}),a(s=>{const r=new Set(s.map(l=>l.id));return[...o.groups.filter(l=>!r.has(l.id)),...s]})}}}function X(){const n=Y(),[g,f]=m.useState(""),[a,b]=m.useState(void 0),[j,u]=m.useState(null),[d,v]=m.useState(!1),[p,h]=m.useState(!1),[k,y]=m.useState(!1),[o,s]=m.useState(""),[r,i]=m.useState({text:"",category:"",tags:""});T.useEffect(()=>{const c=new URLSearchParams(window.location.search).get("data");if(c)try{const x=decodeURIComponent(atob(c)),w=JSON.parse(x);if(w.prompts&&Array.isArray(w.prompts)&&confirm(`Import ${w.prompts.length} prompts and ${w.groups?.length||0} groups?`)){n.importData(w);const C=window.location.pathname;window.history.replaceState({},"",C),W(async()=>{const{activeTab:P}=await import("./uiStore.trYLhbNb.js");return{activeTab:P}},[]).then(({activeTab:P})=>{P.set("local")})}}catch(x){console.error("Failed to import data:",x),alert("Invalid share link.")}},[n.isLoaded]);const l=n.prompts.filter(t=>{const c=a?t.groupId===a:!0,x=g.toLowerCase(),w=t.text.toLowerCase().includes(x)||t.category.toLowerCase().includes(x)||t.tags.some(C=>C.toLowerCase().includes(x));return c&&w}),I=()=>{const t=r.tags.split(",").map(c=>c.trim()).filter(Boolean);if(j)n.updatePrompt(j.id,{text:r.text,category:r.category,tags:t,groupId:a}),u(null);else{const c=n.addPrompt(r.text,r.category,t);a&&n.addToGroup(c.id,a),v(!1)}i({text:"",category:"",tags:""})},E=t=>{i({text:t.text,category:t.category,tags:t.tags.join(", ")}),u(t),v(!1)},L=()=>{o.trim()&&(n.createGroup(o.trim()),s(""),h(!1))},_=()=>{const t={prompts:l,groups:a?n.groups.filter(C=>C.id===a):[]},c=JSON.stringify(t),x=btoa(encodeURIComponent(c)),w=`${window.location.origin}/share?data=${x}`;navigator.clipboard.writeText(w).then(()=>{alert("Share link copied to clipboard!")})};return n.isLoaded?e.jsxs("div",{className:"local-library-container",style:{display:"grid",gridTemplateColumns:"250px 1fr",gap:"2rem",minHeight:"600px"},children:[e.jsxs("aside",{className:"sidebar",style:{borderRight:"1px solid var(--border-light, #e5e7eb)",paddingRight:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{style:{margin:0},children:"My Library"}),e.jsx("button",{onClick:()=>h(!0),title:"New Group",style:{background:"none",border:"none",cursor:"pointer"},children:e.jsx(A,{size:18})})]}),e.jsxs("ul",{style:{listStyle:"none",padding:0},children:[e.jsx("li",{onClick:()=>b(void 0),style:{padding:"0.5rem",cursor:"pointer",borderRadius:"6px",backgroundColor:a===void 0?"var(--brown-light, #f5f1e8)":"transparent",fontWeight:a===void 0?"bold":"normal"},children:"All Prompts"}),n.groups.map(t=>e.jsxs("li",{onClick:()=>b(t.id),style:{padding:"0.5rem",cursor:"pointer",borderRadius:"6px",backgroundColor:a===t.id?"var(--brown-light, #f5f1e8)":"transparent",fontWeight:a===t.id?"bold":"normal",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:t.name}),a===t.id&&e.jsx("button",{onClick:c=>{c.stopPropagation(),confirm("Delete group?")&&n.deleteGroup(t.id)},style:{border:"none",background:"none",color:"#ef4444",cursor:"pointer",padding:0},children:e.jsx(N,{size:14})})]},t.id))]}),p&&e.jsxs("div",{style:{padding:"1rem",background:"#fff",border:"1px solid #ddd",borderRadius:"8px",marginTop:"1rem"},children:[e.jsx("input",{autoFocus:!0,type:"text",placeholder:"Group Name",value:o,onChange:t=>s(t.target.value),style:{width:"100%",padding:"0.5rem",marginBottom:"0.5rem"}}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:L,style:{flex:1,padding:"0.25rem"},children:"Create"}),e.jsx("button",{onClick:()=>h(!1),style:{flex:1,padding:"0.25rem"},children:"Cancel"})]})]})]}),e.jsxs("main",{children:[e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",alignItems:"center"},children:[e.jsxs("div",{className:"search-container",style:{flex:1,position:"relative"},children:[e.jsx(B,{size:18,style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:"#666"}}),e.jsx("input",{type:"text",placeholder:"Search local prompts...",value:g,onChange:t=>f(t.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",borderRadius:"8px",border:"1px solid #ddd"}})]}),e.jsxs("button",{onClick:()=>{v(!0),i({text:"",category:"General",tags:""})},className:"btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:"var(--brown-dark, #2c1810)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:[e.jsx(U,{size:18})," New Prompt"]}),e.jsx("button",{onClick:_,title:"Share current view",style:{padding:"0.75rem",border:"1px solid #ddd",borderRadius:"8px",background:"white",cursor:"pointer"},children:e.jsx(H,{size:18})})]}),(d||j)&&e.jsxs("div",{className:"editor-card",style:{background:"white",padding:"1.5rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",marginBottom:"2rem",border:"1px solid var(--brown-light, #f5f1e8)"},children:[e.jsx("h3",{style:{marginTop:0},children:j?"Edit Prompt":"New Prompt"}),e.jsx("textarea",{value:r.text,onChange:t=>i({...r,text:t.target.value}),placeholder:"Enter your prompt text here...",style:{width:"100%",minHeight:"100px",padding:"1rem",marginBottom:"1rem",borderRadius:"8px",border:"1px solid #ddd"}}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsx("input",{type:"text",placeholder:"Category (e.g. Coding)",value:r.category,onChange:t=>i({...r,category:t.target.value}),style:{padding:"0.5rem",borderRadius:"6px",border:"1px solid #ddd"}}),e.jsx("input",{type:"text",placeholder:"Tags (comma separated)",value:r.tags,onChange:t=>i({...r,tags:t.target.value}),style:{padding:"0.5rem",borderRadius:"6px",border:"1px solid #ddd"}})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>{v(!1),u(null)},style:{padding:"0.5rem 1rem",background:"transparent",border:"1px solid #ddd",borderRadius:"6px",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{onClick:I,style:{padding:"0.5rem 1rem",background:"var(--brown-accent, #8b5c2e)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Save Prompt"})]})]}),e.jsxs("div",{className:"prompt-grid",style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))"},children:[l.map(t=>e.jsxs("div",{className:"card prompt-card",style:{position:"relative",padding:"1.5rem",background:"white",border:"1px solid #eee",borderRadius:"12px"},children:[e.jsxs("div",{style:{position:"absolute",top:"1rem",right:"1rem",display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:()=>E(t),title:"Edit",style:{background:"none",border:"none",cursor:"pointer",color:"#666"},children:e.jsx($,{size:16})}),e.jsx("button",{onClick:()=>{confirm("Delete this prompt?")&&n.deletePrompt(t.id)},title:"Delete",style:{background:"none",border:"none",cursor:"pointer",color:"#ef4444"},children:e.jsx(N,{size:16})})]}),e.jsx("span",{className:"badge",style:{marginBottom:"1rem",display:"inline-block",fontSize:"0.8rem",padding:"0.25rem 0.5rem",background:"#f0f0f0",borderRadius:"4px"},children:t.category}),e.jsx("p",{style:{margin:"1rem 0",lineHeight:"1.5",minHeight:"3rem"},children:t.text}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",fontSize:"0.8rem",color:"#666"},children:t.tags.map((c,x)=>e.jsxs("span",{children:["#",c]},x))})]},t.id)),l.length===0&&!d&&e.jsx("div",{style:{gridColumn:"1/-1",textAlign:"center",padding:"3rem",color:"#888"},children:e.jsx("p",{children:"No prompts found. Create one to get started!"})})]})]})]}):e.jsx("div",{children:"Loading library..."})}export{X as default};
